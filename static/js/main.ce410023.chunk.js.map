{"version":3,"sources":["pages/components/ModalWrapper.js","api/init.js","models/User.js","api/user.js","pages/components/ActionButton.js","features/user/userSlice.js","pages/views/SignUpBox.js","pages/views/LogInBox.js","containers/LoginContainer.js","util/mediabreakpoints.js","assets/user-icon.svg","pages/components/UserIcon.js","containers/Navbar.js","models/Proposal.js","models/Discussion.js","api/discussion.js","api/proposal.js","pages/components/ProposalIcon.js","assets/people.svg","pages/components/ProposalCard.js","pages/components/StandardButton.js","pages/views/BrowseProposalsView.js","assets/world-map.webp","pages/LandingPage.js","pages/components/CommentCard.js","pages/views/CommentForm.js","containers/CommentFormContainer.js","pages/views/DiscussionView.js","assets/placeholderUserIcon.png","pages/components/ProposalMilestones.js","pages/ProposalPage.js","pages/UserPage.js","pages/views/ProposalForm/Description.js","pages/views/ProposalForm/Photo.js","pages/views/ProposalForm/Target.js","pages/views/ProposalForm/Title.js","pages/ProposalCreationPage.js","pages/PageNotFound.js","pages/views/Footer.js","App.js","app/store.js","index.js"],"names":["ModalWrapper","children","clickAway","className","onClick","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","storage","User","name","description","image","proposals","comments","this","userImages","ref","child","userConverter","toFirestore","user","fromFirestore","snapshot","options","data","initializeUser","userId","put","then","getDownloadURL","url","collection","doc","withConverter","set","signUp","email","password","a","auth","createUserWithEmailAndPassword","userCredential","uid","catch","error","code","message","Error","readUser","get","exists","signIn","signInWithEmailAndPassword","ActionButton","type","text","styling","loadingStyle","isLoading","signInHandler","createAsyncThunk","response","signOutHandler","signOut","initializeSignedInHandler","Promise","resolve","reject","onAuthStateChanged","signUpHandler","username","profileImage","userSlice","createSlice","initialState","status","login","signup","reducers","loggedIn","reducer","state","action","payload","loggedOut","extraReducers","pending","fulfilled","rejected","console","log","actions","selectUser","SignUpBox","useState","setUsername","setPassword","setEmail","setProfileImage","setDescription","dispatch","useDispatch","useSelector","previewCanvasRef","useRef","upImg","setUpImg","useEffect","current","canvas","ctx","getContext","Image","src","onload","shorterSide","Math","min","height","width","imageSmoothingQuality","drawImage","max","toBlob","blob","TextInput","value","onChange","placeholder","required","event","target","htmlFor","files","length","reader","FileReader","addEventListener","result","readAsDataURL","accept","style","margin","rows","e","preventDefault","LogInBox","LoginContainer","showLogin","closeLogin","showSignUp","setShowSignUp","ToggleButton","use960Breakpoint","useMediaPredicate","use768Breakpoint","UserIcon","alt","disabled","PlaceholderImage","setImage","history","useHistory","handleOnClick","useCallback","push","imageURL","refFromURL","imageRef","getUserImage","res","NavLinks","userStatus","logOut","to","Fragment","Navbar","biggerThan960","showDropdown","setShowDropdown","toggleDropdown","Logo","Dropdown","Proposal","title","author","supporters","amendments","discussions","Discussion","comment","likes","discussiondb","discussionConverter","discussion","uploadDiscussion","proposalId","add","docRef","readDiscussions","setDiscussions","discussionRef","limit","onSnapshot","querySnapshot","forEach","disc","proposaldb","proposalImages","proposalConverter","proposal","uploadProposal","proposalImageRef","id","update","readProposalUpdates","setProposalInfo","setError","proposalRef","getProposalImage","upvoteProposal","currentUser","FieldValue","arrayUnion","countProposals","size","getProposals","lastProposal","startAfter","proposalSnapshot","ids","docs","ProposalIcon","viewBox","x","y","ProposalCard","formatter","Intl","NumberFormat","authorName","setAuthorName","biggerThan768","SupporterIcon","format","StandardButton","BrowseProposalsView","setProposals","setLastProposal","proposalIds","setProposalIds","setStatus","numberOfDocuments","setNumberOfDocuments","TotalProposalsNumber","proposalList","lastVisible","getproposals","next","proposalsList","map","index","LandingPage","backgroundImage","WorldMap","CommentCard","CommentForm","changeComment","submitComment","closeForm","CommentFormContainer","setComment","DiscussionView","showCommentForm","setShowCommentForm","updateDiscussions","displayCommentForm","ProposalMilestones","numberOfSupporters","hasSigned","nextMilestone","find","element","percentageComplete","round","numberMore","encouragement","ProposalPage","useParams","proposalInfo","setAuthorInfo","ProposalSubText","ProposalDisplay","addSign","includes","SignButton","infoBox","userInfo","UserPage","match","params","setUserInfo","Description","recommendedLength","descriptionLength","subtext","Photo","photo","setPhoto","imgRef","unit","aspect","crop","setCrop","completedCrop","setCompletedCrop","setIsLoading","onLoad","img","scaleX","naturalWidth","scaleY","naturalHeight","pixelRatio","window","devicePixelRatio","setTransform","onImageLoaded","c","onComplete","imageStyle","Target","setTarget","maxLength","maxlength","Number","Title","setTitle","tabButtons","tabs","tab","setTab","completed","item","buttonType","ProposalCreationContainer","setCompleted","setProposal","setFieldInProposal","field","input","newCompleted","toSubmit","PageNotFound","Footer","href","App","setShowLogin","basename","process","exact","path","render","component","ProposalCreationPage","store","configureStore","userReducer","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ce410023.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function ModalWrapper({ children, clickAway }) {\n  return (\n    <div className=\"modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-40\">\n      <div\n        className=\"modal-overlay absolute w-full h-full bg-black opacity-20 \"\n        onClick={clickAway}\n      ></div>\n\n      {children}\n    </div>\n  );\n}\n","import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD3I7PwWN-o2P-_auT_X_xmiry3ZYZvU7A\",\n  authDomain: \"change-clone.firebaseapp.com\",\n  projectId: \"change-clone\",\n  storageBucket: \"change-clone.appspot.com\",\n  messagingSenderId: \"817626444626\",\n  appId: \"1:817626444626:web:6232d23f848f21ca59008b\",\n  measurementId: \"G-5SMX89FECT\",\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nconst db = firebase.firestore();\nconst storage = firebase.storage();\nexport { db, storage };\n","import { getImageFromURL } from \"../api/util\";\n\nexport default class User {\n  constructor(name, description, image, proposals, comments) {\n    this.name = name;\n    this.description = description;\n    this.image = image;\n    this.proposals = proposals;\n    this.comments = comments;\n  }\n}\n","import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport User from \"../models/User\";\nimport { db, storage } from \"./init\";\n\nconst userImages = storage.ref().child(\"userImages\");\nconst PLACEHOLDER_USER_ICON_URL =\n  \"https://firebasestorage.googleapis.com/v0/b/change-clone.appspot.com/o/userImages%2Fj5w9zTnBhHWRviOMTrUPBNlytBh2\";\nconst userConverter = {\n  toFirestore: function (user) {\n    return {\n      name: user.name,\n      description: user.description,\n      image: user.image,\n      proposals: user.proposals,\n      comments: user.comments,\n    };\n  },\n  fromFirestore: function (snapshot, options) {\n    const data = snapshot.data(options);\n    return new User(\n      data.name,\n      data.description,\n      data.image,\n      data.proposals,\n      data.comments\n    );\n  },\n};\n\nconst initializeUser = (userId, name, description, image) => {\n  if (image) {\n    const userImageRef = userImages.child(userId);\n    return userImageRef.put(image).then((snapshot) => {\n      snapshot.ref.getDownloadURL().then(function (url) {\n        db.collection(\"users\")\n          .doc(userId)\n          .withConverter(userConverter)\n          .set(new User(name, description, url, [], []));\n      });\n    });\n  } else {\n    return db\n      .collection(\"users\")\n      .doc(userId)\n      .withConverter(userConverter)\n      .set(new User(name, description, PLACEHOLDER_USER_ICON_URL, [], []));\n  }\n};\n\nconst signUp = async (email, password, name, description, image) => {\n  if (email && password && name && description) {\n    return firebase\n      .auth()\n      .createUserWithEmailAndPassword(email, password)\n      .then(async (userCredential) => {\n        // Signed in\n        let user = userCredential.user;\n        await initializeUser(user.uid, name, description, image);\n        return user.uid;\n      })\n      .catch((error) => {\n        const errorCode = error.code;\n        switch (errorCode) {\n          case \"auth/email-already-in-use\":\n            error.message = \"Email is already in use.\";\n            break;\n          case \"auth/invalid-email\":\n            error.message = \"Invalid email address.\";\n            break;\n          case \"weak-password\":\n            error.message = \"Please use a stronger password.\";\n            break;\n          default:\n        }\n        throw error;\n      });\n  } else {\n    throw new Error(\"Please check if all fields are filled in.\");\n  }\n};\n\nconst readUser = (userId) => {\n  return db\n    .collection(\"users\")\n    .doc(userId)\n    .withConverter(userConverter)\n    .get()\n    .then((doc) => {\n      if (doc.exists) {\n        const user = doc.data();\n        return user;\n      } else {\n        throw Error(\"User does not exist\");\n      }\n    })\n    .catch((error) => {\n      throw error;\n    });\n};\nconst signIn = (email, password) => {\n  return firebase\n    .auth()\n    .signInWithEmailAndPassword(email, password)\n    .then((userCredential) => {\n      const user = userCredential.user;\n      return user.uid;\n    })\n    .catch((error) => {\n      const errorCode = error.code;\n      switch (errorCode) {\n        case \"auth/wrong-password\":\n          error.message = \"That password does not match the email provided.\";\n          break;\n        case \"auth/user-disabled\":\n          error.message = \"Please contact support regarding your account.\";\n          break;\n        case \"auth/user-not-found\":\n          error.message = \"That email does not exist.\";\n          break;\n        case \"auth/invalid-email\":\n          error.message = \"Invalid email address.\";\n          break;\n        default:\n      }\n      throw error;\n    });\n};\n\nconst signOut = () => {\n  return firebase.auth().signOut();\n};\n\nconst getUserImage = (userId) => {\n  return db\n    .collection(\"users\")\n    .doc(userId)\n    .withConverter(userConverter)\n    .get()\n    .then((doc) => {\n      if (doc.exists) {\n        const imageURL = doc.data().image;\n        return storage.refFromURL(imageURL);\n      } else {\n        throw Error(\"User does not exist\");\n      }\n    })\n    .then((imageRef) => {\n      return imageRef.getDownloadURL();\n    });\n};\n\nconst checkSignedInUser = () => {\n  return new Promise((resolve, reject) => {\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        resolve(user.uid);\n      } else {\n        resolve(false);\n      }\n    });\n  });\n};\nexport {\n  signIn,\n  initializeUser,\n  signUp,\n  readUser,\n  getUserImage,\n  signOut,\n  checkSignedInUser,\n};\n","export default function ActionButton({\n  onClick,\n  type,\n  text,\n  styling,\n  isLoading,\n}) {\n  const loadingStyle = isLoading\n    ? \"border-gray-300 bg-gray-300 text-gray-500\"\n    : \"bg-theme-red border-theme-red active:bg-white active:text-theme-red hover:bg-theme-red-dark text-theme-white\";\n\n  return (\n    <button\n      className={`py-2 px-3  font-bold rounded-md border-2  ${styling} ${loadingStyle}`}\n      onClick={onClick}\n      type={type}\n    >\n      {text}\n    </button>\n  );\n}\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { signIn } from \"../../api\";\nimport { checkSignedInUser, signOut, signUp } from \"../../api/user\";\n\nexport const signInHandler = createAsyncThunk(\n  \"user/signIn\",\n  async ({ email, password }) => {\n    const response = await signIn(email, password);\n    return response;\n  }\n);\n\nexport const signOutHandler = createAsyncThunk(\"user/signOut\", async () => {\n  const response = await signOut();\n  return response;\n});\n\nexport const initializeSignedInHandler = createAsyncThunk(\n  \"user/initializeSignedIn\",\n  async () => {\n    const response = await checkSignedInUser();\n    if (response !== false) {\n      return response;\n    } else return 0;\n  }\n);\n\nexport const signUpHandler = createAsyncThunk(\n  \"user/signUp\",\n  async ({ email, password, username, description, profileImage }) => {\n    const response = await signUp(\n      email,\n      password,\n      username,\n      description,\n      profileImage\n    );\n    return response;\n  }\n);\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    data: {\n      uid: 0,\n    },\n    //status: \"noUser\" | \"loading\" | \"hasUser\"\n    status: \"noUser\",\n    error: {\n      login: null,\n      signup: null,\n    },\n  },\n  reducers: {\n    loggedIn: {\n      reducer(state, action) {\n        state.user.uid = action.payload;\n        state.user.status = \"hasUser\";\n      },\n      loggedOut: {\n        reducer(state, action) {\n          state.user.uid = 0;\n          state.user.status = \"noUser\";\n        },\n      },\n    },\n  },\n  extraReducers: {\n    [signInHandler.pending]: (state, action) => {\n      state.status = \"loading\";\n      state.error.login = null;\n    },\n    [signInHandler.fulfilled]: (state, action) => {\n      state.status = \"hasUser\";\n      state.data.uid = action.payload;\n      state.error.login = null;\n    },\n    [signInHandler.rejected]: (state, action) => {\n      state.status = \"failed\";\n      console.log(action.error.message);\n      state.error.login = action.error.message;\n    },\n    [signOutHandler.pending]: (state, action) => {\n      state.status = \"loading\";\n      state.error.login = null;\n    },\n    [signOutHandler.fulfilled]: (state, action) => {\n      state.status = \"noUser\";\n      state.data.uid = 0;\n      state.error.login = null;\n    },\n    [signOutHandler.rejected]: (state, action) => {\n      state.status = \"failed\";\n    },\n    [initializeSignedInHandler.pending]: (state, action) => {\n      state.status = \"loading\";\n      state.error.login = null;\n    },\n    [initializeSignedInHandler.fulfilled]: (state, action) => {\n      if (action.payload === 0) {\n        state.status = \"noUser\";\n        state.data.uid = 0;\n      } else {\n        state.status = \"hasUser\";\n        state.data.uid = action.payload;\n      }\n    },\n    [initializeSignedInHandler.rejected]: (state, action) => {\n      state.status = \"failed\";\n    },\n    [signUpHandler.pending]: (state, action) => {\n      state.status = \"loading\";\n      state.error.signup = null;\n    },\n    [signUpHandler.fulfilled]: (state, action) => {\n      state.status = \"hasUser\";\n      state.data.uid = action.payload;\n      state.error.signup = null;\n    },\n    [signUpHandler.rejected]: (state, action) => {\n      state.status = \"failed\";\n      state.error.signup = action.error.message;\n    },\n  },\n});\n\nexport const { loggedIn, loggedOut } = userSlice.actions;\nexport default userSlice.reducer;\nexport const selectUser = (state) => state.user;\n","import { signUp } from \"../../api\";\nimport { useEffect, useRef, useState } from \"react\";\nimport ActionButton from \"../components/ActionButton\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectUser, signUpHandler } from \"../../features/user/userSlice\";\n\nexport default function SignUpBox() {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [profileImage, setProfileImage] = useState(null);\n  const [description, setDescription] = useState(\"\");\n  const dispatch = useDispatch();\n  const user = useSelector(selectUser);\n  const previewCanvasRef = useRef(null);\n  const [upImg, setUpImg] = useState(null);\n\n  const changeUsername = (event) => {\n    setUsername(event.target.value);\n  };\n  const changePassword = (event) => {\n    setPassword(event.target.value);\n  };\n  const changeEmail = (event) => {\n    setEmail(event.target.value);\n  };\n  const changeDescription = (event) => {\n    setDescription(event.target.value);\n  };\n  const changeProfileImage = (event) => {\n    if (event.target.files && event.target.files.length > 0) {\n      const reader = new FileReader();\n\n      reader.addEventListener(\"load\", (event) => {\n        // called once readAsDataURL is completed\n        setUpImg(reader.result);\n      });\n\n      reader.readAsDataURL(event.target.files[0]); // read file as data url\n    }\n  };\n\n  useEffect(() => {\n    if (!upImg || !previewCanvasRef.current) return;\n    const canvas = previewCanvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const image = new Image();\n    image.src = upImg;\n    image.onload = () => {\n      const shorterSide = Math.min(image.height, image.width);\n      canvas.width = 150;\n      canvas.height = 150;\n      console.log(image.height, image.width, shorterSide);\n      ctx.imageSmoothingQuality = \"high\";\n      ctx.drawImage(\n        image,\n        Math.max(0, (image.width - shorterSide) / 2),\n        Math.max(0, (image.height - shorterSide) / 2),\n        shorterSide,\n        shorterSide,\n        0,\n        0,\n        150,\n        150\n      );\n      previewCanvasRef.current.toBlob((blob) => {\n        setProfileImage(blob);\n      });\n    };\n  }, [upImg]);\n\n  const submitform = (e) => {\n    e.preventDefault();\n    dispatch(\n      signUpHandler({ email, password, username, description, profileImage })\n    );\n  };\n\n  const TextInput = ({ type, name, value, onChange, placeholder }) => {\n    return (\n      <input\n        className=\"py-1 px-2 w-full active:border-gray-400\"\n        required\n        type={type}\n        name={name}\n        value={value}\n        onChange={onChange}\n        placeholder={placeholder}\n      />\n    );\n  };\n  return (\n    <form className=\"flex flex-col mt-3\">\n      <div className=\"border rounded-sm border-gray-300 divide-y divide-y-gray-300\">\n        {TextInput({\n          type: \"text\",\n          name: \"Name\",\n          value: username,\n          onChange: changeUsername,\n          placeholder: \"Name\",\n        })}\n        {TextInput({\n          type: \"email\",\n          name: \"Email\",\n          value: email,\n          onChange: changeEmail,\n          placeholder: \"Email\",\n        })}\n        {TextInput({\n          type: \"password\",\n          name: \"password\",\n          value: password,\n          onChange: changePassword,\n          placeholder: \"Password\",\n        })}\n        <div className=\"py-1 px-2 w-full active:border-gray-400 flex flex-col\">\n          <label className=\"mb-1\" htmlFor=\"profileImage\">\n            Upload a picture (optional):\n          </label>\n          <input\n            className=\"text-sm\"\n            name=\"profileImage\"\n            type=\"file\"\n            onChange={changeProfileImage}\n            accept=\"image/*\"\n            required\n          />\n          <div\n            className={`overflow-hidden rounded-full border-gray-300 border ${\n              upImg ? \"\" : \"hidden\"\n            }`}\n            style={{\n              margin: \"auto\",\n              width: \"150px\",\n              height: \"150px\",\n            }}\n          >\n            <canvas\n              ref={previewCanvasRef}\n              // Rounding is important so the canvas width and height matches/is a multiple for sharpness.\n              style={{\n                margin: \"auto\",\n                width: \"150px\",\n                height: \"150px\",\n              }}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"mt-3\">\n        <textarea\n          className=\"long-text-area\"\n          name=\"description\"\n          rows=\"5\"\n          placeholder=\"Description\"\n          onChange={changeDescription}\n          value={description}\n          required\n        ></textarea>\n      </div>\n      <div className=\"h-3\">\n        <p className=\"text-xs text-red-800\">{user.error.signup}</p>\n      </div>\n      <div className=\"mt-4 flex justify-center\">\n        <ActionButton\n          type=\"submit\"\n          onClick={submitform}\n          text=\"Submit\"\n          className=\"w-full md:w-auto\"\n          isLoading={user.status === \"loading\"}\n        />\n      </div>\n    </form>\n  );\n}\n","import { useState } from \"react\";\nimport { selectUser, signInHandler } from \"../../features/user/userSlice\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport ActionButton from \"../components/ActionButton\";\n\nexport default function LogInBox() {\n  const [password, setPassword] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const user = useSelector(selectUser);\n\n  const dispatch = useDispatch();\n\n  const changePassword = (event) => {\n    setPassword(event.target.value);\n  };\n  const changeEmail = (event) => {\n    setEmail(event.target.value);\n  };\n\n  const submitform = (e) => {\n    e.preventDefault();\n    dispatch(signInHandler({ email, password }));\n  };\n\n  const TextInput = ({ type, name, value, onChange, placeholder }) => {\n    return (\n      <input\n        className=\"py-1 px-2 w-full active:border-gray-400\"\n        required\n        type={type}\n        name={name}\n        value={value}\n        onChange={onChange}\n        placeholder={placeholder}\n      />\n    );\n  };\n  return (\n    <form className=\"flex flex-col mt-3\">\n      <div className=\"border rounded-sm border-gray-300 divide-y divide-y-gray-300\">\n        {TextInput({\n          type: \"email\",\n          name: \"Email\",\n          value: email,\n          onChange: changeEmail,\n          placeholder: \"Email\",\n        })}\n        {TextInput({\n          type: \"password\",\n          name: \"password\",\n          value: password,\n          onChange: changePassword,\n          placeholder: \"Password\",\n        })}\n      </div>\n      <div className=\"h-3\">\n        <p className=\"text-xs text-red-800\">{user.error.login}</p>\n      </div>\n\n      <div className=\"mt-4 flex justify-center\">\n        <ActionButton\n          type=\"submit\"\n          onClick={submitform}\n          text=\"Log In\"\n          className=\"w-full md:w-auto\"\n        />\n      </div>\n    </form>\n  );\n}\n","import ModalWrapper from \"../pages/components/ModalWrapper\";\nimport SignUpBox from \"../pages/views/SignUpBox\";\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport LogInBox from \"../pages/views/LogInBox\";\nimport { selectUser } from \"../features/user/userSlice\";\nexport default function LoginContainer({ showLogin, closeLogin }) {\n  const [showSignUp, setShowSignUp] = useState(false);\n\n  const ToggleButton = ({ text }) => {\n    return (\n      <button\n        className=\"text-theme-red underline\"\n        onClick={() => {\n          setShowSignUp(showSignUp ^ true);\n        }}\n      >\n        {text}\n      </button>\n    );\n  };\n  const loginSignup = () => {\n    if (showSignUp) {\n      return (\n        <div>\n          <h1 className=\"text-center mt-3\">Sign Up</h1>\n          <p className=\"text-center mt-2 mb-6 pb-3 border-b border-gray-400\">\n            Already have an account? <ToggleButton text=\"Log in\" />\n          </p>\n          <SignUpBox />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <h1 className=\"text-center mt-3\">Log In</h1>\n          <p className=\"text-center mt-2 mb-6 pb-3 border-b border-gray-400\">\n            Don't have an account? <ToggleButton text=\"Sign up\" />\n          </p>\n          <LogInBox />\n        </div>\n      );\n    }\n  };\n  if (showLogin) {\n    return (\n      <ModalWrapper clickAway={closeLogin}>\n        <div className=\"relative bg-white rounded m-auto w-full h-full max-w-full-sm z-50 animate-expand-fast md:w-96 md:h-auto\">\n          <button\n            className=\"absolute top-2 right-3 text-3xl md:text-xl\"\n            onClick={closeLogin}\n          >\n            &#x2715;\n          </button>\n          <div className=\"p-6\">{loginSignup()}</div>\n        </div>\n      </ModalWrapper>\n    );\n  } else {\n    return null;\n  }\n}\n","import { useMediaPredicate } from \"react-media-hook\";\n\nexport const use960Breakpoint = () => {\n  return useMediaPredicate(\"(min-width:960px)\");\n};\n\nexport const use768Breakpoint = () => {\n  return useMediaPredicate(\"(min-width:768px)\");\n};\n","export default __webpack_public_path__ + \"static/media/user-icon.8f6c6dae.svg\";","import { useCallback, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { getUserImage } from \"../../api/user\";\nimport PlaceholderImage from \"../../assets/user-icon.svg\";\n\nexport function UserIcon({ userId, styling, alt, disabled }) {\n  const [image, setImage] = useState(PlaceholderImage);\n  const history = useHistory();\n\n  const handleOnClick = useCallback(\n    () => history.push(`/user/${userId}`),\n    [history, userId]\n  );\n  useEffect(() => {\n    getUserImage(userId)\n      .then((res) => {\n        setImage(res);\n      })\n      .catch((error) => console.log(error));\n  }, [userId]);\n\n  const onClick = () => {\n    if (disabled) {\n      return () => {};\n    } else return handleOnClick;\n  };\n  return (\n    <img\n      src={image}\n      className={`rounded-full  border border-gray-300 ${styling}`}\n      alt={`${alt}`}\n      onClick={onClick()}\n    />\n  );\n}\n","import React, { useState } from \"react\";\nimport { use960Breakpoint } from \"../util/mediabreakpoints\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { selectUser, signOutHandler } from \"../features/user/userSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { UserIcon } from \"../pages/components/UserIcon\";\n\nfunction NavLinks({ userStatus, userId, showLogin, logOut }) {\n  const biggerThan960 = use960Breakpoint();\n\n  if (biggerThan960) {\n    return (\n      <ul className=\"flex space-x-4 ml-10\">\n        <li>\n          <Link to=\"/create_proposal\"> Create Petition </Link>\n        </li>\n        <li>\n          <Link to=\"/\"> Browse </Link>\n        </li>\n      </ul>\n    );\n  } else\n    return (\n      <ul className=\"space-y-2\">\n        <li>\n          <Link to=\"/proposals\"> Browse </Link>\n        </li>\n        {userStatus === \"hasUser\" ? (\n          <React.Fragment>\n            <li>\n              <Link to=\"/create_proposal\"> Create Petition </Link>\n            </li>\n            <li>\n              <Link to={`/user/${userId}`}> My Page </Link>\n            </li>\n            <li>\n              <button onClick={logOut}> Sign Out </button>\n            </li>\n          </React.Fragment>\n        ) : (\n          <li>\n            <button onClick={showLogin}> Log in or sign up</button>\n          </li>\n        )}\n      </ul>\n    );\n}\nexport default function Navbar({ showLogin }) {\n  const biggerThan960 = use960Breakpoint();\n  const [showDropdown, setShowDropdown] = useState(false);\n  const user = useSelector(selectUser);\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const logOut = (e) => {\n    e.preventDefault();\n    dispatch(signOutHandler()).then(() => {\n      history.push(\"/\");\n    });\n  };\n\n  function toggleDropdown() {\n    setShowDropdown(showDropdown ^ true);\n  }\n\n  const Logo = () => {\n    return (\n      <Link to=\"/\">\n        <p className=\"text-3xl font-bold text-theme-red tracking-tighter\">\n          change.org\n        </p>\n      </Link>\n    );\n  };\n\n  const Dropdown = () => {\n    if (showDropdown) {\n      if (biggerThan960) {\n        return (\n          <div\n            className=\"fixed h-full w-full top-0 z-40\"\n            onClick={toggleDropdown}\n          >\n            <div className=\"relative h-full w-960px top-0 z-40 mx-auto\">\n              <div className=\"absolute top-12 right-4 z-40\">\n                <div className=\"triangle border-b border-white empty-content-before float-right z-50 mr-1\"></div>\n                <div className=\"mt-2 shadow-lg bg-white p-3 text-lg border border-gray-300 rounded-sm \">\n                  {user.status === \"hasUser\" ? (\n                    <ul className=\"space-y-2 py-2 px-1 text-sm\">\n                      <li>\n                        <Link to=\"/create_proposal\"> Create Petition </Link>\n                      </li>\n                      <li>\n                        <Link to={`/user/${user.data.uid}`}> My Page </Link>\n                      </li>\n                      <li>\n                        <span className=\"w-full border-b border-gray-400\"></span>\n                      </li>\n                      <li>\n                        <button\n                          className=\"underline text-theme-red hover:text-theme-black\"\n                          onClick={logOut}\n                        >\n                          {\" \"}\n                          Sign Out{\" \"}\n                        </button>\n                      </li>\n                    </ul>\n                  ) : (\n                    <ul>\n                      <li>\n                        <button onClick={showLogin}> Log in or sign up</button>\n                      </li>\n                    </ul>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      } else\n        return (\n          <div\n            className=\"fixed h-full w-full top-0 z-40\"\n            onClick={toggleDropdown}\n          >\n            <div className=\"fixed top-12 right-2 z-40\">\n              <div className=\"triangle border-b border-white empty-content-before float-right z-50 mr-2\"></div>\n              <div className=\"mt-2 shadow-lg bg-white p-3 text-lg border border-gray-300 rounded-sm \">\n                <NavLinks\n                  userStatus={user.status}\n                  userId={user.data.uid}\n                  showLogin={showLogin}\n                  logOut={logOut}\n                />\n              </div>\n            </div>\n          </div>\n        );\n    } else return null;\n  };\n\n  if (biggerThan960) {\n    return (\n      <nav className=\"fixed top-0 left-0 z-30 h-14 w-full flex flex-row shadow bg-white\">\n        <div className=\"w-960px px-3 m-auto\">\n          <div className=\"flex flex-row items-center justify-between self-start\">\n            <div className=\"flex items-center\">\n              <Logo />\n              <NavLinks\n                userStatus={user.status}\n                userId={user.data.uid}\n                showLogin={showLogin}\n                logOut={logOut}\n              />\n            </div>\n            {user.status === \"hasUser\" ? (\n              <div className=\"cursor-pointer\" onClick={toggleDropdown}>\n                <UserIcon\n                  userId={user.data.uid}\n                  styling=\"h-9 w-9 rounded-full\"\n                  disabled={true}\n                />\n              </div>\n            ) : (\n              <button className=\"hover:text-theme-red\" onClick={showLogin}>\n                {\" \"}\n                Log in\n              </button>\n            )}\n          </div>\n        </div>\n        <Dropdown />\n      </nav>\n    );\n  } else\n    return (\n      <nav className=\"fixed top-0 left-0 z-30 h-14 w-full flex flex-row shadow bg-white\">\n        <div className=\"w-full px-3 m-auto\">\n          <div className=\"flex flex-row items-center justify-between self-start\">\n            <Logo />\n            <div className=\"flex flex-row space-x-3\">\n              {user.status === \"hasUser\" ? (\n                <UserIcon\n                  userId={user.data.uid}\n                  styling=\"h-10 w-10 rounded-full\"\n                />\n              ) : null}\n              <button className={`text-2xl `} onClick={toggleDropdown}>\n                &#9776;\n              </button>\n            </div>\n          </div>\n        </div>\n        <Dropdown />\n      </nav>\n    );\n}\n","export default class Proposal {\n  constructor(\n    title = \"\",\n    description = \"\",\n    image = \"\",\n    target = \"\",\n    author = \"\",\n    supporters = [],\n    amendments = [],\n    discussions = []\n  ) {\n    this.title = title;\n    this.description = description;\n    this.image = image;\n    this.target = target;\n    this.author = author;\n    this.supporters = supporters;\n    this.amendments = amendments;\n    this.discussions = discussions;\n  }\n}\n","export default class Discussion {\n  constructor(author = \"\", comment = \"\", likes = 0) {\n    this.author = author;\n    this.comment = comment;\n    this.likes = likes;\n  }\n}\n","import Discussion from \"../models/Discussion\";\nimport { db, storage } from \"./init\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nconst discussiondb = db.collection(\"discussions\");\n\nvar discussionConverter = {\n  toFirestore: function (discussion) {\n    return {\n      comment: discussion.comment,\n      likes: discussion.likes,\n      author: discussion.author,\n    };\n  },\n  fromFirestore: function (snapshot, options) {\n    const data = snapshot.data(options);\n    return new Discussion(data.author, data.comment, data.likes.length);\n  },\n};\n\nconst uploadDiscussion = async (proposalId, discussion) => {\n  const docRef = await discussiondb\n    .doc(proposalId)\n    .collection(\"comments\")\n    .withConverter(discussionConverter)\n    .add(discussion);\n  return docRef;\n};\n\nconst readDiscussions = async (proposalId, setDiscussions) => {\n  const discussionRef = discussiondb\n    .doc(proposalId)\n    .collection(\"comments\")\n    .limit(25);\n  const snapshots = await discussionRef\n    .withConverter(discussionConverter)\n    .onSnapshot((querySnapshot) => {\n      const discussions = [];\n      querySnapshot.forEach((disc) => discussions.push(disc.data()));\n      setDiscussions(discussions);\n    });\n};\n\nexport { uploadDiscussion, readDiscussions };\n","import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport Proposal from \"../models/Proposal\";\nimport { db, storage } from \"./init\";\nimport { uploadDiscussion } from \"./discussion\";\n\nconst proposaldb = db.collection(\"proposals\");\nconst proposalImages = storage.ref().child(\"proposalImages\");\n\nvar proposalConverter = {\n  toFirestore: function (proposal) {\n    return {\n      title: proposal.title,\n      description: proposal.description,\n      image: proposal.image,\n      target: proposal.target,\n      author: proposal.author,\n      supporters: proposal.supporters,\n      amendments: proposal.amendments,\n      discussions: proposal.discussions,\n    };\n  },\n  fromFirestore: function (snapshot, options) {\n    const data = snapshot.data(options);\n    return new Proposal(\n      data.title,\n      data.description,\n      data.image,\n      data.target,\n      data.author,\n      data.supporters,\n      data.amendments,\n      data.discussions\n    );\n  },\n};\n\nconst uploadProposal = async (proposal, image) => {\n  const docRef = await proposaldb\n    .withConverter(proposalConverter)\n    .add(proposal);\n  const proposalImageRef = proposalImages.child(docRef.id);\n  const snapshot = await proposalImageRef.put(image);\n  const url = await snapshot.ref.getDownloadURL();\n  await docRef.update({ image: url });\n  return docRef.id;\n};\n\nconst readProposal = async (proposalId) => {\n  const proposal = await proposaldb\n    .doc(proposalId)\n    .withConverter(proposalConverter)\n    .get();\n  if (proposal.exists) {\n    return proposal.data();\n  } else {\n    throw Error(\"Proposal does not exist\");\n  }\n};\n\nconst readProposalUpdates = async (proposalId, setProposalInfo, setError) => {\n  const proposalRef = proposaldb.doc(proposalId);\n  return proposalRef.withConverter(proposalConverter).onSnapshot((doc) => {\n    if (doc.exists) {\n      setProposalInfo(doc.data());\n    } else {\n      setError(Error(\"Proposal does not exist\"));\n    }\n  });\n};\n\nconst getProposalImage = async (proposalId) => {\n  const doc = await proposaldb\n    .doc(proposalId)\n    .withConverter(proposalConverter)\n    .get();\n  if (doc.exists) {\n    const imageRef = storage.refFromURL(doc.data().image);\n    return imageRef.getDownloadURL();\n  }\n};\n\nconst upvoteProposal = async (proposalId) => {\n  const user = firebase.auth().currentUser;\n  if (user != null) {\n    const proposalRef = proposaldb.doc(proposalId);\n    await proposalRef.update({\n      supporters: firebase.firestore.FieldValue.arrayUnion(user.uid),\n    });\n    return;\n  } else {\n    throw new Error(\"User not signed in\");\n  }\n};\n\nconst countProposals = async () => {\n  return proposaldb.get().then((querySnapshot) => {\n    return querySnapshot.size;\n  });\n};\nconst getProposals = async (lastProposal) => {\n  if (lastProposal) {\n    const proposalSnapshot = await proposaldb\n      .startAfter(lastProposal)\n      .limit(4)\n      .withConverter(proposalConverter)\n      .get();\n    const proposals = [];\n    const ids = [];\n    proposalSnapshot.forEach((proposal) => {\n      proposals.push(proposal.data());\n      ids.push(proposal.id);\n    });\n    return {\n      proposals,\n      ids,\n      lastProposal: proposalSnapshot.docs[[proposalSnapshot.docs.length - 1]],\n    };\n  } else {\n    const proposalSnapshot = await proposaldb\n      .limit(4)\n      .withConverter(proposalConverter)\n      .get();\n    const proposals = [];\n    const ids = [];\n    proposalSnapshot.forEach((proposal) => {\n      proposals.push(proposal.data());\n      ids.push(proposal.id);\n    });\n    return {\n      proposals,\n      ids,\n      lastProposal: proposalSnapshot.docs[proposalSnapshot.docs.length - 1],\n    };\n  }\n};\nexport {\n  uploadProposal,\n  readProposal,\n  getProposalImage,\n  upvoteProposal,\n  getProposals,\n  readProposalUpdates,\n  countProposals,\n};\n","import { useCallback, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { getProposalImage } from \"../../api/proposal\";\nimport ContentLoader from \"react-content-loader\";\n\nexport function ProposalIcon({ proposalId, styling, alt, height, width }) {\n  const [image, setImage] = useState();\n  const history = useHistory();\n  const handleOnClick = useCallback(\n    () => history.push(`/proposal/${proposalId}`),\n    [history, proposalId]\n  );\n  useEffect(() => {\n    getProposalImage(proposalId)\n      .then((res) => {\n        setImage(res);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, [proposalId]);\n\n  if (image)\n    return (\n      <img\n        src={image}\n        className={`${styling}`}\n        alt={`${alt}`}\n        onClick={handleOnClick}\n      />\n    );\n  else\n    return (\n      <ContentLoader viewBox=\"0 0 16 9\">\n        {\" \"}\n        <rect x=\"0\" y=\"0\" height=\"9\" width=\"16\" />\n      </ContentLoader>\n    );\n}\n","export default __webpack_public_path__ + \"static/media/people.f996517d.svg\";","import { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { readUser } from \"../../api/user\";\nimport { use768Breakpoint } from \"../../util/mediabreakpoints\";\nimport { ProposalIcon } from \"./ProposalIcon\";\nimport { UserIcon } from \"./UserIcon\";\nimport SupporterIcon from \"../../assets/people.svg\";\nexport default function ProposalCard({ proposal, proposalId }) {\n  const formatter = new Intl.NumberFormat();\n  const [authorName, setAuthorName] = useState(\"...\");\n  const history = useHistory();\n  const biggerThan768 = use768Breakpoint();\n  useEffect(() => {\n    readUser(proposal.author).then((user) => setAuthorName(user.name));\n  }, [proposal.author]);\n\n  const handleOnClick = () => {\n    history.push(`/proposal/${proposalId}`);\n  };\n\n  if (biggerThan768) {\n    return (\n      <div\n        className=\"bg-white border-gray-300 border-t border-b px-4 py-4 text-xs md:border md:rounded-md cursor-pointer\"\n        onClick={handleOnClick}\n      >\n        <div className=\"grid grid-cols-cardLeftPhoto space-x-3\">\n          <div className=\"space-y-1\">\n            <p className=\"text-gray-500 truncate\">\n              Petition to {proposal.target}\n            </p>\n            <h2>{proposal.title}</h2>\n\n            <div className=\"relative\">\n              <p className=\"line-clamp-3\">{proposal.description}</p>\n              <p className=\"underline absolute bottom-0 right-0 z-10 text-theme-red pl-20 bg-gradient-to-l from-white via-white to-transparent\">\n                Read more\n              </p>\n            </div>\n          </div>\n          <div className=\"px-2 flex items-center justify-center\">\n            <ProposalIcon\n              proposalId={proposalId}\n              styling=\"object-cover w-142px h-142px\"\n            />\n          </div>\n        </div>\n\n        <div className=\"mt-3 flex items-center\">\n          <UserIcon userId={proposal.author} styling=\"w-8\" />\n          <b className=\"ml-2\">{authorName}</b>\n          <p className=\"mr-0 ml-auto\">\n            <img\n              src={SupporterIcon}\n              className=\"h-4 inline mr-2 self-center\"\n              alt=\"Supporters icon\"\n            />\n            {formatter.format(proposal.supporters.length)} supporters\n          </p>\n        </div>\n      </div>\n    );\n  } else {\n    return (\n      <div\n        className=\"bg-white border-gray-300 border-t border-b px-4 py-4 text-xs md:border md:rounded-md\"\n        onClick={handleOnClick}\n      >\n        <p className=\"text-gray-500 truncate\">Petition to {proposal.target}</p>\n        <h2 className=\"mb-4\">{proposal.title}</h2>\n        <div className=\"px-2 mb-6\">\n          <ProposalIcon proposalId={proposalId} />\n        </div>\n\n        <p className=\"mb-2 line-clamp-3\">{proposal.description}</p>\n        <div className=\"flex items-center\">\n          <UserIcon userId={proposal.author} styling=\"w-8\" />\n          <b className=\"ml-2\">{authorName}</b>\n          <p className=\"mr-0 ml-auto\">\n            <img\n              src={SupporterIcon}\n              className=\"h-4 inline mr-2 self-center\"\n              alt=\"Supporters icon\"\n            />\n            {formatter.format(proposal.supporters.length)} supporters\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n","export default function StandardButton({ onClick, type, text, styling }) {\n  return (\n    <button\n      className={`bg-theme-white border-2 border-gray-400 hover:border-gray-600 py-2 px-4 text-theme-black  font-bold rounded-md ${styling}`}\n      onClick={onClick}\n      type={type}\n    >\n      {text}\n    </button>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { countProposals, getProposals } from \"../../api/proposal\";\nimport ProposalCard from \"../components/ProposalCard\";\nimport { BulletList } from \"react-content-loader\";\nimport StandardButton from \"../components/StandardButton\";\n\nexport default function BrowseProposalsView() {\n  const [proposals, setProposals] = useState();\n  const [lastProposal, setLastProposal] = useState();\n  const [proposalIds, setProposalIds] = useState();\n  const [status, setStatus] = useState(\"loading\");\n  const [numberOfDocuments, setNumberOfDocuments] = useState(0);\n\n  useEffect(() => {\n    const getproposals = async () => {\n      const TotalProposalsNumber = await countProposals();\n      setNumberOfDocuments(TotalProposalsNumber);\n      const {\n        proposals: proposalList,\n        lastProposal: lastVisible,\n        ids,\n      } = await getProposals();\n      setProposals(proposalList);\n      setLastProposal(lastVisible);\n      setProposalIds(ids);\n      setStatus(\"completed\");\n    };\n    getproposals();\n  }, []);\n\n  const next = async () => {\n    const {\n      proposals: proposalsList,\n      lastProposal: lastVisible,\n      ids,\n    } = await getProposals(lastProposal);\n    setProposals([...proposals, ...proposalsList]);\n    setProposalIds([...proposalIds, ...ids]);\n    setLastProposal(lastVisible);\n  };\n  if (status === \"completed\") {\n    return (\n      <div className=\"space-y-6 md:space-y-10 md:mx-5\">\n        {proposals.map((proposal, index) => {\n          return (\n            <ProposalCard\n              proposal={proposal}\n              key={index}\n              proposalId={proposalIds[index]}\n            />\n          );\n        })}\n        {proposals.length >= numberOfDocuments ? null : (\n          <StandardButton onClick={next} styling=\"w-full\" text={\"Load more\"} />\n        )}\n      </div>\n    );\n  } else if (status === \"loading\") {\n    return (\n      <div className=\"h-48\">\n        <BulletList />\n      </div>\n    );\n  } else return null;\n}\n","export default __webpack_public_path__ + \"static/media/world-map.13cd6ad0.webp\";","import { useHistory } from \"react-router\";\nimport ActionButton from \"./components/ActionButton\";\nimport BrowseProposalsView from \"./views/BrowseProposalsView\";\nimport Login from \"./views/SignUpBox\";\nimport WorldMap from \"../assets/world-map.webp\";\n\nexport default function LandingPage() {\n  const history = useHistory();\n  const redirectToProposal = () => {\n    history.push(\"/create_proposal\");\n  };\n  return (\n    <div>\n      <div\n        className=\"py-28 flex-col items-center leading-snug text-center bg-top bg-cover bg-no-repeat md:bg-contain\"\n        style={{ backgroundImage: `url(${WorldMap})` }}\n      >\n        <h1 className=\"text-5xl mx-5 md:w-768px md:mx-auto\">\n          The world's platform for change.\n        </h1>\n        <p className=\"text-theme-red mt-5\">Victories every day.</p>\n        <ActionButton\n          onClick={redirectToProposal}\n          text=\"Start a petition\"\n          styling=\"mt-5\"\n        />\n      </div>\n      <div className=\"bg-gray-100 py-4 md:pt-10 md:mx-auto md:bg-white md:w-768px \">\n        <h2 className=\"mx-2 mb-4 md:mb-4 md:mx-5\">\n          What's happening on change.org\n        </h2>\n        <BrowseProposalsView />\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { readUser } from \"../../api/user\";\nimport { UserIcon } from \"./UserIcon\";\n\nexport default function CommentCard({ discussion }) {\n  const [authorName, setAuthorName] = useState(\"\");\n\n  useEffect(() => {\n    readUser(discussion.author).then((user) => {\n      setAuthorName(user.name);\n    });\n  }, [discussion]);\n  return (\n    <div className=\"bg-white p-2 md:pt-4 rounded-sm space-y-2\">\n      <div className=\"flex space-x-2 items-center\">\n        <UserIcon userId={discussion.author} styling=\"w-10\" />\n        <Link to={`/user/${discussion.author}`}>\n          <b>{authorName}</b>\n        </Link>\n      </div>\n      <p>{discussion.comment}</p>\n    </div>\n  );\n}\n","import ActionButton from \"../components/ActionButton\";\nimport StandardButton from \"../components/StandardButton\";\n\nexport default function CommentForm({\n  comment,\n  error,\n  changeComment,\n  submitComment,\n  closeForm,\n}) {\n  return (\n    <div className=\"w-full pt-2\">\n      <form>\n        <textarea\n          className=\"w-full text-theme-black\"\n          name=\"comment\"\n          rows=\"3\"\n          placeholder=\"I'm signing because...\"\n          onChange={changeComment}\n          value={comment}\n        ></textarea>\n        <div className=\"text-sm text-red-800 mb-2\">{error}</div>\n        <div className=\"flex justify-between space-x-3\">\n          <ActionButton\n            type=\"submit\"\n            onClick={submitComment}\n            text=\"Submit\"\n            styling=\"w-full h-9 text-sm\"\n          />\n          <StandardButton\n            type=\"button\"\n            onClick={closeForm}\n            text=\"Cancel\"\n            styling=\"w-full h-9 text-sm flex items-center justify-center\"\n          />\n        </div>\n      </form>\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { uploadDiscussion } from \"../api/discussion\";\nimport { selectUser } from \"../features/user/userSlice\";\nimport Discussion from \"../models/Discussion\";\nimport ModalWrapper from \"../pages/components/ModalWrapper\";\nimport CommentForm from \"../pages/views/CommentForm\";\n\nexport default function CommentFormContainer({ proposalId, closeForm }) {\n  const user = useSelector(selectUser);\n  const [comment, setComment] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const changeComment = (event) => {\n    setComment(event.target.value);\n  };\n\n  const submitComment = (e) => {\n    e.preventDefault();\n    if (!comment) {\n      setError(\"Please enter a comment.\");\n    }\n    if (user.status === \"hasUser\" && comment) {\n      uploadDiscussion(proposalId, new Discussion(user.data.uid, comment)).then(\n        closeForm\n      );\n    }\n  };\n\n  if (user.status !== \"hasUser\") {\n    return null;\n  }\n\n  return (\n    <CommentForm\n      comment={comment}\n      changeComment={changeComment}\n      submitComment={submitComment}\n      closeForm={closeForm}\n      error={error}\n    />\n  );\n}\n","import StandardButton from \"../components/StandardButton\";\nimport { readDiscussions } from \"../../api/discussion\";\nimport { useEffect, useState } from \"react\";\nimport CommentCard from \"../components/CommentCard\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../features/user/userSlice\";\nimport { UserIcon } from \"../components/UserIcon\";\nimport placeholderUserIcon from \"../../assets/placeholderUserIcon.png\";\nimport CommentFormContainer from \"../../containers/CommentFormContainer\";\n\nexport default function DiscussionView({ proposalId, showLogin }) {\n  const [discussions, setDiscussions] = useState(null);\n  const [status, setStatus] = useState(\"loading\");\n  const [showCommentForm, setShowCommentForm] = useState(false);\n  const user = useSelector(selectUser);\n  const updateDiscussions = (discussions) => {\n    setDiscussions(discussions);\n    setStatus(\"completed\");\n  };\n  useEffect(() => {\n    readDiscussions(proposalId, updateDiscussions);\n  }, [proposalId]);\n\n  const showDiscussions = () => {\n    if (status === \"loading\") return null;\n    else\n      return discussions.map((disc, index) => (\n        <CommentCard key={index} discussion={disc} />\n      ));\n  };\n\n  const displayCommentForm = () => {\n    if (user.status === \"hasUser\") {\n      if (!showCommentForm) setShowCommentForm(true);\n    } else {\n      showLogin();\n    }\n  };\n  const SigningForm = () => {\n    return (\n      <div\n        onClick={displayCommentForm}\n        className=\"transition-all duration-75 bg-white rounded-sm text-gray-400 w-full flex space-x-4 p-2 items-center md:border-b-2 md:pb-4\"\n      >\n        {user.status === \"hasUser\" ? (\n          <UserIcon\n            userId={user.data.uid}\n            disabled={true}\n            styling=\"w-10 self-start\"\n          />\n        ) : (\n          <img\n            src={placeholderUserIcon}\n            className=\"w-10 rounded-full  border border-gray-300\"\n            alt=\"Current user\"\n          />\n        )}\n        {showCommentForm ? (\n          <CommentFormContainer\n            proposalId={proposalId}\n            closeForm={() => setShowCommentForm(false)}\n          />\n        ) : (\n          <p>I'm signing because...</p>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"w-full bg-gray-200 px-4 py-6 space-y-4 md:bg-white md:px-0\">\n      <h2>Discussions</h2>\n      {SigningForm()}\n      <div className=\"space-y-4 md:divide-y-2 md:space-y-3\">\n        {showDiscussions()}\n      </div>\n    </div>\n  );\n}\n","export default \"data:image/png;base64,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\"","import { use768Breakpoint } from \"../../util/mediabreakpoints\";\n\nexport function ProposalMilestones({ numberOfSupporters, hasSigned }) {\n  const formatter = new Intl.NumberFormat();\n  const biggerThan768 = use768Breakpoint();\n  const milestones = [500, 1000, 2500, 5000, 10000, 50000, 100000];\n  const nextMilestone = milestones.find(\n    (element) => element > numberOfSupporters\n  );\n  const percentageComplete = Math.round(\n    (numberOfSupporters / nextMilestone) * 100\n  );\n  const numberMore = formatter.format(nextMilestone - numberOfSupporters);\n  const encouragement = hasSigned\n    ? `Thanks to your support, this petition has a chance of winning! We only need ${numberMore} more signatures to reach the next goal - please share the petition to help!`\n    : `We only need ${numberMore} more signatures to reach the next goal - can you help?`;\n  if (biggerThan768) {\n    return (\n      <div className=\"mb-4\">\n        <p>\n          <b>\n            <span>{formatter.format(numberOfSupporters)}</span> have signed.\n          </b>{\" \"}\n          Let's get to {formatter.format(nextMilestone)}!\n        </p>\n        <div className=\"w-full bg-gray-300 h-3 rounded-full mt-3\">\n          <div\n            className=\"bg-gradient-to-r from-yellow-400 to-theme-red h-3 rounded-full z-10\"\n            style={{ width: `${percentageComplete}%` }}\n          ></div>\n        </div>\n\n        <span className=\"w-11/12 border-b-2 border-gray-300 mx-auto mt-5 block\"></span>\n        <p className=\"mt-3\">{encouragement}</p>\n      </div>\n    );\n  } else {\n    return (\n      <div>\n        <p>\n          <b>\n            <span>{formatter.format(numberOfSupporters)}</span> have signed.\n          </b>{\" \"}\n          Let's get to {formatter.format(nextMilestone)}!\n        </p>\n        <div className=\"w-full bg-gray-300 h-3 rounded-full my-2\">\n          <div\n            className=\"bg-gradient-to-r from-yellow-400 to-theme-red h-3 rounded-full z-10\"\n            style={{ width: `${percentageComplete}%` }}\n          ></div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { useEffect, useState } from \"react\";\nimport {\n  readProposal,\n  readProposalUpdates,\n  upvoteProposal,\n} from \"../api/proposal\";\nimport { ProposalIcon } from \"./components/ProposalIcon\";\nimport { BulletList, List } from \"react-content-loader\";\nimport React from \"react\";\nimport { UserIcon } from \"./components/UserIcon\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport { readUser } from \"../api/user\";\nimport { selectUser } from \"../features/user/userSlice\";\nimport { useSelector } from \"react-redux\";\nimport ActionButton from \"./components/ActionButton\";\nimport Discussions from \"./views/DiscussionView\";\nimport { use768Breakpoint } from \"../util/mediabreakpoints\";\nimport { ProposalMilestones } from \"./components/ProposalMilestones\";\nexport default function ProposalPage({ showLogin }) {\n  const user = useSelector(selectUser);\n  const { proposalId } = useParams();\n  const [proposalInfo, setProposalInfo] = useState();\n  const [author, setAuthorInfo] = useState();\n  const [status, setStatus] = useState(\"loading\");\n  const history = useHistory();\n  const biggerThan768 = use768Breakpoint();\n\n  useEffect(() => {\n    readProposalUpdates(\n      proposalId,\n      (proposal) => {\n        setProposalInfo(proposal);\n        readUser(proposal.author).then((user) => {\n          setAuthorInfo(user);\n          setStatus(\"completed\");\n        });\n      },\n      (error) => history.push(\"/404\")\n    );\n  }, [proposalId, history]);\n\n  const ProposalSubText = () => {\n    return (\n      <div className=\"flex justify-start items-center space-x-3 py-2\">\n        <UserIcon userId={proposalInfo.author} styling=\"w-10\" />\n        <p className=\"font-bold text-sm text-gray-600 md:text-xs\">\n          <Link to={`/user/${proposalInfo.author}`}>\n            <u>{author.name}</u> started this petition to{\" \"}\n            <u>{proposalInfo.target}</u>\n          </Link>\n        </p>\n      </div>\n    );\n  };\n  const ProposalDisplay = () => {\n    return (\n      <div>\n        <div className=\"border-b border-gray-300 space-y-2 w-full px-4 pb-2\">\n          <h1> {proposalInfo.title} </h1>\n          <ProposalMilestones\n            numberOfSupporters={proposalInfo.supporters.length}\n          />\n\n          {ProposalSubText()}\n        </div>\n        <div className=\"border-b border-gray-300 px-4 text-lg py-5 whitespace-pre-wrap pb-5\">\n          {proposalInfo.description}\n        </div>\n      </div>\n    );\n  };\n\n  const addSign = () => {\n    if (user.status === \"hasUser\") {\n      upvoteProposal(proposalId);\n    } else {\n      showLogin();\n    }\n  };\n\n  const hasSigned = () => {\n    return proposalInfo.supporters.includes(user.data.uid);\n  };\n  const SignButton = () => {\n    if (user.status === \"hasUser\" && status === \"completed\") {\n      if (hasSigned()) {\n        return (\n          <ActionButton\n            text=\"✔ Thank you for signing!\"\n            onClick={() => {}}\n            styling=\"w-full m-auto h-12 md:h-10 md:text-sm md:px-2\"\n          />\n        );\n      }\n    }\n    return (\n      <ActionButton\n        text=\"Sign this petition\"\n        onClick={addSign}\n        styling=\"w-full m-auto h-12 md:h-10\"\n      />\n    );\n  };\n\n  const content = () => {\n    if (status === \"loading\")\n      return (\n        <div className=\"w-full m-auto\">\n          <List />\n        </div>\n      );\n    else\n      return (\n        <div>\n          <ProposalDisplay />\n          <Discussions proposalId={proposalId} showLogin={showLogin} />\n        </div>\n      );\n  };\n\n  const content768 = () => {\n    if (status === \"loading\")\n      return (\n        <div className=\"w-768px mt-32 mx-auto\">\n          <BulletList />\n        </div>\n      );\n    else\n      return (\n        <div className=\"w-768px px-10 mt-24 mx-auto xl:w-1024px\">\n          <h1 className=\"text-center\">{proposalInfo.title}</h1>\n          <div className=\"w-full mt-10 grid grid-cols-cardLeftPhoto\">\n            <div className=\"pr-10\">\n              <ProposalIcon\n                proposalId={proposalId}\n                styling=\"w-full\"\n                height=\"9\"\n                width=\"16\"\n              />\n              {ProposalSubText()}\n              <div className=\"text-lg py-5 whitespace-pre-wrap pb-5\">\n                {proposalInfo.description}\n              </div>\n              <Discussions proposalId={proposalId} showLogin={showLogin} />\n            </div>\n            <div>\n              <div className=\"bg-gray-100 p-4 rounded sticky top-20\">\n                <ProposalMilestones\n                  numberOfSupporters={proposalInfo.supporters.length}\n                  hasSigned={hasSigned()}\n                />\n                <SignButton />\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n  };\n\n  if (biggerThan768) {\n    return <div>{content768()}</div>;\n  } else\n    return (\n      <div>\n        <ProposalIcon\n          proposalId={proposalId}\n          styling=\"w-full\"\n          height=\"9\"\n          width=\"16\"\n        />\n        <div className=\"mt-4 mb-20\">{content()}</div>\n        <div className=\"fixed bottom-0 h-16 py-2 px-3 bg-gray-100 border-t border-gray-300 w-full\">\n          {SignButton()}\n        </div>\n      </div>\n    );\n}\n","import { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { readUser } from \"../api/user\";\nimport { UserIcon } from \"./components/UserIcon\";\n\nfunction infoBox(status, userInfo, userId) {\n  if (status === \"loading\") {\n    return <h1>Loading...</h1>;\n  } else {\n    return (\n      <div>\n        <div className=\"flex flex-col pb-3 px-3 mx-8 justify-between items-center\">\n          <UserIcon\n            userId={userId}\n            styling=\"w-36 rounded-full border-2 border-gray-400\"\n          />\n          <div className=\"flex flex-col justify-start mt-6\">\n            <h1 className=\"text-3xl\">{userInfo.name}</h1>\n          </div>\n        </div>\n        <span className=\"block w-9 m-auto border-b-2 border-gray-300\"></span>\n        <div className=\"mt-6 flex flex-col text-center pb-10 mx-5 md:mx-10\">\n          <p>{userInfo.description}</p>\n        </div>\n      </div>\n    );\n  }\n}\nexport default function UserPage({ match }) {\n  const userId = match.params.userId;\n  const [userInfo, setUserInfo] = useState();\n  const [status, setStatus] = useState(\"loading\");\n  const history = useHistory();\n  useEffect(() => {\n    readUser(userId)\n      .then((user) => {\n        setUserInfo(user);\n        setStatus(\"completed\");\n      })\n      .catch((error) => history.push(\"/404\"));\n  }, [userId, history]);\n\n  return (\n    <div>\n      <div className=\"pt-8 px-4 mx-2 border-b-2 border-gray-300 md:mx-auto md:w-768px\">\n        {infoBox(status, userInfo, userId)}\n      </div>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport ActionButton from \"../../components/ActionButton\";\n\nexport default function Description({\n  description,\n  setDescription,\n  recommendedLength,\n  next,\n}) {\n  const [error, setError] = useState(\"\");\n  const complete = () => {\n    if (description.length) {\n      next();\n    } else {\n      setError(\"Please tell your story.\");\n    }\n  };\n\n  const subtext = (descriptionLength, recommendedLength) => {\n    if (descriptionLength > 0 && descriptionLength < recommendedLength) {\n      return (\n        <p className=\"text-s\">\n          Great — you've started writing your petition. We recommend adding\n          another\n          <span className=\"text-theme-red font-bold\">\n            {` ${recommendedLength - description.length} `}\n          </span>\n          more characters before you finish — keep going!\n        </p>\n      );\n    } else if (descriptionLength > recommendedLength) {\n      return (\n        <p className=\"text-s\">\n          Great — your petition is currently\n          <span className=\"text-green-400 font-bold\">\n            {` ${description.length} `}\n          </span>\n          characters long — that’s within the description length of some of the\n          most successful petitions!\n        </p>\n      );\n    } else {\n      return (\n        <p className=\"text-s\">\n          The most successful petitions tend to be at least 3 paragraphs long\n          (about 1,000 characters in length)\n        </p>\n      );\n    }\n  };\n  return (\n    <div>\n      <h1 className=\"text-3xl mb-2\">Explain the problem you want to solve</h1>\n      <p className=\"mb-4\">\n        People are more likely to support your petition if it’s clear why you\n        care. Explain how this change will impact you, your family, or your\n        community.\n      </p>\n      <textarea\n        name=\"description\"\n        className=\"long-text-area\"\n        rows=\"10\"\n        value={description}\n        placeholder=\"Petition description\"\n        onChange={(event) => {\n          setError(\"\");\n          setDescription(event.target.value);\n        }}\n      />\n\n      <div className=\"mt-2\">\n        <p className=\"text-s text-red-800\">{error}</p>\n        {subtext(description.length, recommendedLength)}\n      </div>\n      <div className=\"md:flex md:justify-end md:mb-3\">\n        <ActionButton\n          text=\"Continue\"\n          styling=\"w-full mt-4 md:w-min md:float-right\"\n          onClick={complete}\n        />\n      </div>\n    </div>\n  );\n}\n","import \"react-image-crop/dist/ReactCrop.css\";\nimport ReactCrop from \"react-image-crop\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport ActionButton from \"../../components/ActionButton\";\nimport autoprefixer from \"autoprefixer\";\n\nexport default function Photo({ photo, setPhoto, next }) {\n  const [upImg, setUpImg] = useState(null);\n  const imgRef = useRef(null);\n  const previewCanvasRef = useRef(null);\n  const [crop, setCrop] = useState({ unit: \"%\", width: 50, aspect: 16 / 9 });\n  const [completedCrop, setCompletedCrop] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const complete = () => {\n    if (!(!completedCrop?.width || !completedCrop?.height)) {\n      try {\n        setIsLoading(true);\n        next();\n      } catch (error) {\n        setIsLoading(false);\n        setError(error.message);\n      }\n    } else {\n      setError(\"Please include a photo.\");\n    }\n  };\n\n  const onSelectFile = (e) => {\n    if (e.target.files && e.target.files.length > 0) {\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () => setUpImg(reader.result));\n      reader.readAsDataURL(e.target.files[0]);\n    }\n  };\n\n  const onLoad = useCallback((img) => {\n    imgRef.current = img;\n  }, []);\n\n  useEffect(() => {\n    if (!completedCrop || !previewCanvasRef.current || !imgRef.current) {\n      return;\n    }\n\n    const image = imgRef.current;\n    const canvas = previewCanvasRef.current;\n    const crop = completedCrop;\n\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n    const ctx = canvas.getContext(\"2d\");\n    const pixelRatio = window.devicePixelRatio;\n\n    canvas.width = crop.width * pixelRatio;\n    canvas.height = crop.height * pixelRatio;\n\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    ctx.imageSmoothingQuality = \"high\";\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width,\n      crop.height\n    );\n    previewCanvasRef.current.toBlob((blob) => {\n      setPhoto(blob);\n    });\n  }, [completedCrop, setPhoto]);\n  return (\n    <div>\n      <h1 className=\"text-3xl mb-2\">Add a photo or video</h1>\n      <p className=\"mb-4\">\n        Petitions with a photo or video receive <b> six times </b> more\n        signatures than those without. Include one that captures the emotion of\n        your story.\n      </p>\n      <div className=\"mx-3 pt-2\">\n        <div className=\"mx-auto w-full border border-gray-400 rounded p-2\">\n          <div className=\"flex justify-center\">\n            <ReactCrop\n              src={upImg}\n              onImageLoaded={onLoad}\n              crop={crop}\n              onChange={(c) => setCrop(c)}\n              onComplete={(c) => setCompletedCrop(c)}\n              imageStyle={{ \"max-height\": \"500px\" }}\n            />\n          </div>\n\n          <div>\n            <label\n              htmlFor=\"file-upload\"\n              className=\"bg-theme-white border-2 border-gray-400 hover:border-gray-600 py-2 px-4 text-theme-black font-bold rounded-md\n              block my-3 text-center md:w-max md:mx-auto\"\n            >\n              Upload a picture\n            </label>\n            <input\n              id=\"file-upload\"\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={onSelectFile}\n              className=\"hidden\"\n            />\n          </div>\n        </div>\n        <div className=\"hidden\">\n          <canvas\n            ref={previewCanvasRef}\n            // Rounding is important so the canvas width and height matches/is a multiple for sharpness.\n            style={{\n              width: Math.round(completedCrop?.width ?? 0),\n              height: Math.round(completedCrop?.height ?? 0),\n              margin: \"auto\",\n            }}\n          />\n        </div>\n        <p className=\"text-s text-red-800\">{error}</p>\n        <div className=\"md:flex md:justify-end md:mb-3\">\n          <ActionButton\n            type=\"button\"\n            onClick={complete}\n            styling=\"w-full mt-3 md:w-max\"\n            text=\"Submit\"\n            isLoading={isLoading}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport ActionButton from \"../../components/ActionButton\";\n\nexport default function Target({ target, setTarget, maxLength, next }) {\n  const [error, setError] = useState(\"\");\n  const complete = () => {\n    if (target.length) {\n      next();\n    } else {\n      setError(\"Please add a decision maker.\");\n    }\n  };\n  return (\n    <div>\n      <h1 className=\"text-3xl mb-2\">\n        Great! Who has the power to make this change?\n      </h1>\n      <p className=\"mb-4\">\n        Choose the recipient(s) of your petition. These are people or\n        organisations with the power to solve your problem or take the action\n        you’re demanding.\n      </p>\n      <input\n        name=\"target\"\n        className=\"long-text-area\"\n        value={target}\n        placeholder=\"Petition target\"\n        onChange={(event) => {\n          setError(\"\");\n          setTarget(event.target.value);\n        }}\n        maxlength={maxLength}\n      />\n\n      <div className=\"flex flex-row justify-between mt-2\">\n        <p className=\"text-s text-red-800\">{error}</p>\n        <span className=\"ml-auto mr-0\">\n          {Number(maxLength) - target.length}\n        </span>\n      </div>\n      <div className=\"md:flex md:justify-end md:mb-3\">\n        <ActionButton\n          text=\"Continue\"\n          styling=\"w-full mt-4 md:w-min md:float-right\"\n          onClick={complete}\n        />\n      </div>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport ActionButton from \"../../components/ActionButton\";\n\nexport default function Title({ title, setTitle, maxLength, next }) {\n  const [error, setError] = useState(\"\");\n\n  const complete = () => {\n    if (title.length) {\n      next();\n    } else {\n      setError(\"Please write a headline.\");\n    }\n  };\n  return (\n    <div>\n      <h1 className=\"text-3xl mb-2\">Write your petition title</h1>\n      <p className=\"mb-4\">\n        This is the first thing that people will see about your petition. Get\n        their attention with a short title that focusses on the change you'd\n        like them to support.\n      </p>\n      <textarea\n        name=\"title\"\n        className=\"long-text-area\"\n        rows=\"2\"\n        value={title}\n        placeholder=\"What do you want to achieve?\"\n        onChange={(event) => {\n          setError(\"\");\n          setTitle(event.target.value);\n        }}\n        maxLength={maxLength}\n      />\n      <div className=\"flex flex-row justify-between\">\n        <p className=\"text-s text-red-800\">{error}</p>\n        <span className=\"mr-0 ml-auto\">{Number(maxLength) - title.length}</span>\n      </div>\n      <div className=\"md:flex md:justify-end md:mb-3\">\n        <ActionButton\n          text=\"Continue\"\n          styling=\"w-full mt-4 md:w-min\"\n          onClick={complete}\n        />\n      </div>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport Proposal from \"../models/Proposal\";\nimport { uploadProposal } from \"../api/proposal\";\nimport Description from \"../pages/views/ProposalForm/Description\";\nimport Photo from \"../pages/views/ProposalForm/Photo\";\nimport Target from \"../pages/views/ProposalForm/Target\";\nimport Title from \"../pages/views/ProposalForm/Title\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../features/user/userSlice\";\nimport { useHistory } from \"react-router\";\n\nconst tabButtons = (tabs, tab, setTab, completed) => {\n  const buttonType = (index, completed) => {\n    if (completed[index]) {\n      return (\n        <button\n          className={`rounded-full w-10 h-10 border-2 border-theme-red text-md ${\n            tab === index\n              ? \"bg-theme-red text-white\"\n              : \"bg-theme-white text-theme-red\"\n          }`}\n          onClick={() => setTab(index)}\n        >\n          {tab === index ? index + 1 : \"✓\"}\n        </button>\n      );\n    } else {\n      return (\n        <button\n          className={`rounded-full w-10 h-10 border-2 text-md ${\n            tab === index\n              ? \"border-theme-red bg-theme-red text-white\"\n              : \"bg-theme-white border-gray-500 text-gray-500\"\n          }`}\n          onClick={\n            completed[index - 1]\n              ? () => {\n                  setTab(index);\n                }\n              : () => {}\n          }\n        >\n          {index + 1}\n        </button>\n      );\n    }\n  };\n\n  return tabs.map((item, index) => {\n    return buttonType(index, completed);\n  });\n};\n\nexport default function ProposalCreationContainer() {\n  const user = useSelector(selectUser);\n  const tabIndexes = [1, 2, 3, 4];\n  const [completed, setCompleted] = useState([0, 0, 0, 0]);\n  const [tab, setTab] = useState(0);\n  const [proposal, setProposal] = useState(new Proposal());\n  const [image, setImage] = useState(null);\n  const history = useHistory();\n  const setFieldInProposal = (field) => {\n    return (input) => {\n      setProposal({\n        ...proposal,\n        [field]: input,\n      });\n    };\n  };\n\n  const next = (index) => {\n    const newCompleted = [...completed];\n    newCompleted[index] = 1;\n    setCompleted(newCompleted);\n    setTab(index + 1);\n  };\n\n  const complete = () => {\n    if (\n      proposal.title &&\n      proposal.target &&\n      proposal.description &&\n      image &&\n      user.status === \"hasUser\"\n    ) {\n      // const supporters = [];\n      // const num_supporters = Math.floor(Math.random() * 10000) + 1000;\n      // for (let i = 0; i < num_supporters; i++) {\n      //   supporters.push(i);\n      // }\n      // const toSubmit = { ...proposal, author: user.data.uid, supporters };\n      const toSubmit = { ...proposal, author: user.data.uid };\n      uploadProposal(toSubmit, image).then((proposalId) => {\n        history.push(`/proposal/${proposalId}`);\n      });\n    } else {\n      console.log([\n        proposal.title,\n        proposal.target,\n        proposal.description,\n        image,\n        user.status === \"hasUser\",\n      ]);\n      throw new Error(\"Please fill in all the fields.\");\n    }\n  };\n  const tabs = [\n    <Title\n      title={proposal.title}\n      setTitle={setFieldInProposal(\"title\")}\n      maxLength=\"90\"\n      next={() => next(0)}\n    />,\n    <Target\n      target={proposal.target}\n      setTarget={setFieldInProposal(\"target\")}\n      maxLength=\"100\"\n      next={() => next(1)}\n    />,\n    <Description\n      description={proposal.description}\n      setDescription={setFieldInProposal(\"description\")}\n      recommendedLength=\"1000\"\n      next={() => next(2)}\n    />,\n    <Photo photo={image} setPhoto={setImage} next={complete} />,\n  ];\n\n  return (\n    <div>\n      <div className=\"flex flex-row justify-evenly py-12 px-10 w-96 mx-auto\">\n        {tabButtons(tabIndexes, tab, setTab, completed)}\n      </div>\n      <div className=\"px-2 md:w-768px mx-auto\">{tabs[tab]}</div>\n    </div>\n  );\n}\n","import { Link } from \"react-router-dom\";\n\nexport function PageNotFound() {\n  return (\n    <div>\n      <div className=\"mx-10 md:w-600px md:mx-auto mt-40 bg-red-100 p-8 text-red-800 space-y-3\">\n        <h1>We couldn't find the page you were looking for. </h1>\n        <p>\n          The URL may have been incorrect or the page may have been deleted.\n        </p>\n        <p>\n          Return to the{\" \"}\n          <span className=\"text-theme-red hover:text-red-800\">\n            <Link to=\"/\">homepage</Link>\n          </span>\n          .\n        </p>\n      </div>\n    </div>\n  );\n}\n","export function Footer() {\n  return (\n    <div className=\"h-48 bg-gray-100 px-2 w-full border-t border-gray-300 pt-5 text-gray-500\">\n      <div className=\"w-full h-full mx-auto md:w-768px text-sm flex flex-col\">\n        <p>\n          This website is a clone of{\" \"}\n          <a\n            className=\"text-theme-red-dark hover:text-gray-500 underline\"\n            href=\"change.org\"\n          >\n            change.org\n          </a>\n          , made for the final project of{\" \"}\n          <a\n            className=\"text-theme-red-dark hover:text-gray-500 underline\"\n            href=\"theodinproject.com\"\n          >\n            The Odin Project\n          </a>\n          {\"'s \"}\n          javascript course.\n        </p>\n        <p className=\"mt-1\">\n          Built from scratch with React + Redux, Tailwind and Firebase, and\n          bootstrapped with create-react-app.\n        </p>\n\n        <span className=\"w-full border-b border-gray-300 block mt-auto mb-2\"></span>\n        <p className=\"mt-1\">\n          Created by{\" \"}\n          <a\n            className=\"text-theme-red-dark hover:text-gray-500 underline\"\n            href=\"https://github.com/nyoos\"\n          >\n            Sun I\n          </a>\n        </p>\n        <p className=\"mb-5 mt-1\">\n          Content and images were taken from change.org.\n        </p>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport LoginContainer from \"./containers/LoginContainer\";\n\nimport Navbar from \"./containers/Navbar\";\nimport LandingPage from \"./pages/LandingPage\";\nimport ProposalPage from \"./pages/ProposalPage\";\nimport UserPage from \"./pages/UserPage\";\nimport ProposalCreationPage from \"./pages/ProposalCreationPage\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  initializeSignedInHandler,\n  selectUser,\n} from \"./features/user/userSlice\";\nimport { PageNotFound } from \"./pages/PageNotFound\";\nimport { Footer } from \"./pages/views/Footer\";\n\nfunction App() {\n  const [showLogin, setShowLogin] = useState(false);\n  const user = useSelector(selectUser);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(initializeSignedInHandler());\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (user.status === \"hasUser\") {\n      setShowLogin(false);\n    }\n  }, [user]);\n\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n      <div className=\"text-theme-black font-medium h-full\">\n        <Navbar showLogin={() => setShowLogin(true)} />\n        <LoginContainer\n          showLogin={showLogin}\n          closeLogin={() => setShowLogin(false)}\n        />\n        <div className=\"min-h-screen -mb-48\">\n          <div className=\"App mt-14 mb-2\">\n            <Switch>\n              <Route exact path=\"/\" render={() => <LandingPage />} />\n              <Route exact path=\"/proposal/:proposalId\">\n                <ProposalPage showLogin={() => setShowLogin(true)} />\n              </Route>\n              <Route\n                exact\n                path=\"/create_proposal\"\n                component={ProposalCreationPage}\n              />\n              <Route exact path=\"/user/:userId\" component={UserPage} />\n              <Route exact path=\"/404\" component={PageNotFound} />\n              <Redirect to=\"/404\" />\n            </Switch>\n          </div>\n          <div className=\"h-48 block\"></div>\n        </div>\n        <Footer />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport userReducer from \"../features/user/userSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    user: userReducer,\n  },\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { store } from \"./app/store\";\nimport { Provider } from \"react-redux\";\nimport \"./api\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}